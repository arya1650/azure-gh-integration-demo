trigger:
  - main

pool:
  name: Default

steps:
- script: echo "This is a sample build step"
  displayName: 'Build Phase'

- task: XplatGenerateReleaseNotes@4
  inputs:
    outputfile: 'release-notes.md'
    templateLocation: 'InLine'
    template: |

      ## 📦 Release Notes

      {{#if workItems}}
      ### ✅ Linked Work Items
      {{#forEach workItems}}
      - {{this.id}}: {{this.fields['System.Title']}}
      {{/forEach}}
      {{/if}}

      {{#if commits}}
      ### 🔁 Commits
      {{#forEach commits}}
      - {{this.id}}: {{this.message}}
      {{/forEach}}
      {{/if}}

- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: 'release-notes.md'
    ArtifactName: 'ReleaseNotes'
    publishLocation: 'Container'
